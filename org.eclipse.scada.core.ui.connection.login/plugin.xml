<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="context" name="Login Context" schema="schema/org.eclipse.scada.core.ui.connection.login.context.exsd"/>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.trim.status">
         <toolbar
               id="org.eclipse.scada.core.ui.connection.login.verticalTrim">
            <command
                  commandId="org.eclipse.scada.core.ui.connection.login.LoginDialogCommand"
                  icon="icons/e/connect.gif"
                  label="Login"
                  style="push">
            </command>
            <control
                  class="org.eclipse.scada.core.ui.connection.login.toolbar.LoginStatusControl">
            </control>
            <command
                  commandId="org.eclipse.scada.core.ui.connection.login.LogoutCommand"
                  disabledIcon="icons/d/disconnect_co.gif"
                  icon="icons/e/disconnect_co.gif"
                  label="Logout"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.scada.core.ui.category"
            description="Open the login dialog"
            id="org.eclipse.scada.core.ui.connection.login.LoginDialogCommand"
            name="Login Dialog">
      </command>
      <command
            categoryId="org.eclipse.scada.core.ui.category"
            description="Log out the current session"
            id="org.eclipse.scada.core.ui.connection.login.LogoutCommand"
            name="Logout">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.scada.core.ui.connection.login.handler.LoginDialogHandler"
            commandId="org.eclipse.scada.core.ui.connection.login.LoginDialogCommand">
         <enabledWhen>
            <with
                  variable="org.eclipse.scada.core.ui.connection.login.sessionState">
               <equals
                     value="loggedOut">
               </equals>
            </with></enabledWhen>
      </handler>
      <handler
            class="org.eclipse.scada.core.ui.connection.login.handler.LogoutHandler"
            commandId="org.eclipse.scada.core.ui.connection.login.LogoutCommand">
         <enabledWhen>
            <with
                  variable="org.eclipse.scada.core.ui.connection.login.sessionState">
               <equals
                     value="loggedIn">
               </equals>
            </with></enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="org.eclipse.scada.core.ui.connection.login.LoginSessionProvider">
         <variable
               name="org.eclipse.scada.core.ui.connection.login.sessionState"
               priorityLevel="workbench">
         </variable>
         <variable
               name="org.eclipse.scada.core.ui.connection.login.session"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.scada.core.ui.connection.login.LoginDialogCommand"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="CTRL+L">
      </key>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.scada.core.ui.connection.login.LoginSessionPropertyTester"
            id="org.eclipse.scada.core.ui.connection.login.session"
            namespace="org.eclipse.scada.core.ui.connection.login.session"
            properties="properties"
            type="org.eclipse.scada.core.ui.connection.login.LoginSession">
      </propertyTester>
      <propertyTester
            class="org.eclipse.scada.core.ui.connection.login.LoginSessionRoleTester"
            id="org.eclipse.scada.core.ui.connection.login.session.role"
            namespace="org.eclipse.scada.core.ui.connection.login.session.role"
            properties="roles"
            type="org.eclipse.scada.core.ui.connection.login.LoginSession">
      </propertyTester>
   </extension>

</plugin>
